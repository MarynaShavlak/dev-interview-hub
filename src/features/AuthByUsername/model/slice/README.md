# Documentation for 'loginSlice'

## Overview
The `loginSlice` is a Redux slice responsible for managing the login credentials and authentication state within the application.
It utilizes `buildSlice` function to handle username and password inputs, as well as integration with an asynchronous login service.

## Import Statements
```typescript
import { PayloadAction } from '@reduxjs/toolkit';
import { buildSlice } from '@/shared/lib/store';
import { LoginSchema } from '../types/loginSchema';
import { loginByUsername } from '../services/loginByUsername/loginByUsername';
```

- `PayloadAction`: A type from Redux Toolkit used to define the shape of action payloads.
- `buildSlice`: A custom utility function for creating Redux slices.
- `LoginSchema`: TypeScript type defining the structure for login state.
- `loginByUsername`: Service function for asynchronous login authentication.


## Initial State
```typescript
const initialState: LoginSchema = {
    isLoading: false,
    username: '',
    password: '',
};
```

The initial state of the slice is defined using the `LoginSchema` type.
It includes:
- `isLoading`: Boolean indicating if a login request is in progress.
- `username`: String holding the current username input value.
- `password`: String holding the current password input value.
- `error`: Optional property to store any login error messages.

## Slice Definition
- **name**: The name of the slice, which is **'login'**.
- **initialState**: The initial state defined earlier.
- **reducers**: An object containing reducer functions.
- **extraReducers**: Handles asynchronous actions for loginByUsername service requests.
- 
## Reducers

| **Reducer Name** | **Description**               | **Payload** | **State Changes**                                      |
|------------------|--------------------------------|-------------|-------------------------------------------------------|
| `setUsername`    | Sets the username input value  | `string`    | Updates `state.username` with the payload value.      |
| `setPassword`    | Sets the password input value  | `string`    | Updates `state.password` with the payload value.      |


## Extra Reducers

| **Action**                  | **Description**                             | **Payload**      | **State Changes**                                          |
|-----------------------------|---------------------------------------------|------------------|-----------------------------------------------------------|
| `loginByUsername.pending`   | Indicates that the login request is pending | None             | Sets `isLoading` to `true` and clears any existing `error`.|
| `loginByUsername.fulfilled` | Handles successful login authentication     | None             | Sets `isLoading` to `false`.                               |
| `loginByUsername.rejected`  | Handles errors encountered during login     | `Error` object   | Sets `isLoading` to `false` and updates `error` with the payload. |


## Exports
```typescript
export const {
    actions: loginActions,
    reducer: loginReducer,
    useActions: useLoginActions,
} = loginSlice;
```
- **loginActions**: An object containing the action creators generated by the slice.
- **loginReducer**: The reducer function to be used in the Redux store.
- **useLoginActions**: Custom hook to conveniently access actions in React components.


## Usage Example
```typescript jsx
import { useLoginActions, loginReducer } from '@/path/to/loginSlice';
import { configureStore } from '@reduxjs/toolkit';

const store = configureStore({
    reducer: {
        login: loginReducer,
    },
});

// Dispatching an actions

import { useCallback } from 'react';
import { useAppDispatch } from '@/shared/lib/hooks/useAppDispatch/useAppDispatch';

export const LoginForm = () => {
    const dispatch = useAppDispatch();
    const { setUsername, setPassword } = useLoginActions();

    const handleLogin = useCallback(() => {
        // Dispatch login action using credentials
        dispatch(loginByUsername({ username, password }));
    }, [dispatch, username, password]);

    return (
        <form onSubmit={handleLogin}>
            <input type="text" onChange={(e) => setUsername(e.target.value)} />
            <input type="password" onChange={(e) => setPassword(e.target.value)} />
            <button type="submit">Login</button>
        </form>
    );
};
```

## Conclusion 
The `loginSlice` manages login state and user authentication seamlessly within Redux, offering a structured approach to handle input changes, loading states, and error handling. 
By integrating with `loginByUsername` service asynchronously, this slice enhances application security and user experience by ensuring reliable login functionalities.
